(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-75edc913"],{"2aaa":function(e,t,s){},"4e82":function(e,t,s){"use strict";var i=s("23e7"),n=s("1c0b"),a=s("7b0b"),r=s("d039"),o=s("a640"),l=[],c=l.sort,u=r((function(){l.sort(void 0)})),d=r((function(){l.sort(null)})),p=o("sort"),h=u||!d||!p;i({target:"Array",proto:!0,forced:h},{sort:function(e){return void 0===e?c.call(a(this)):c.call(a(this),n(e))}})},"4edc":function(e,t,s){"use strict";s("2aaa")},"629f":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.state?s("div",{staticClass:"app-container"},[s("el-header",[s("div",[e._v("题目总数："+e._s(e.paperData.questionList.length))]),s("el-row",[s("el-col",{attrs:{span:6}},[s("div",[e._v("考试时长："+e._s(e.paperData.duration)+"分钟")])]),s("el-col",{attrs:{span:6}},[s("div",[e._v("剩余时长： "+e._s(e.duration)+" ")])])],1)],1),s("el-header",[s("el-row",e._l(e.paperData.questionList,(function(t,i){return s("span",{key:i},[s("el-col",{attrs:{span:1}},[s("span",{staticStyle:{"margin-right":"5px"}},[e._v(e._s(i+1))]),s("input",{attrs:{type:"checkbox"},domProps:{value:i},on:{click:e.checkoutChange}})])],1)})),0)],1),s("el-main",[s("el-footer",[s("el-button",{on:{click:e.subtract}},[e._v("上一题")]),s("el-button",{on:{click:e.add}},[e._v("下一题")]),s("el-button",{on:{click:e.submit}},[e._v("提交")])],1),e._l(e.paperData.questionList,(function(t,i){return s("span",{key:t.id},[s("div",{directives:[{name:"show",rawName:"v-show",value:i==e.currentIndex,expression:"index == currentIndex"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:"select"==t.questionsType,expression:"item.questionsType == 'select'"}]},[s("div",[s("p",[e._v("单选题")]),s("p",[e._v(e._s(i+1)+"."+e._s(t.title)+"：")])]),s("div",[s("el-radio-group",{staticStyle:{display:"flex","flex-direction":"column"},model:{value:e.selectRadio,callback:function(t){e.selectRadio=t},expression:"selectRadio"}},e._l(t.optionList,(function(t,i){return s("el-radio",{key:i,attrs:{label:t.serialNumber}},[e._v(e._s(t.serialNumber)+":"+e._s(t.optionContent))])})),1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:"selects"==t.questionsType,expression:"item.questionsType == 'selects'"}]},[s("div",[s("p",[e._v("多选题")]),s("p",[e._v(e._s(i+1)+"."+e._s(t.title)+"：")])]),s("div",[s("el-checkbox-group",{staticStyle:{display:"flex","flex-direction":"column"},model:{value:e.selectsRadioList,callback:function(t){e.selectsRadioList=t},expression:"selectsRadioList"}},e._l(t.optionList,(function(t,i){return s("el-checkbox",{key:i,attrs:{label:t.serialNumber}},[e._v(e._s(t.serialNumber)+":"+e._s(t.optionContent))])})),1)],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:"answer"==t.questionsType,expression:"item.questionsType == 'answer'"}]},[s("div",[s("p",[e._v("问答题")]),s("p",[e._v(e._s(i+1)+"."+e._s(t.title)+"：")])]),s("div",[s("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.answers,callback:function(t){e.answers=t},expression:"answers"}})],1)])])])}))],2),s("el-dialog",{attrs:{"close-on-click-modal":!1,"show-close":!1,"close-on-press-escape":!1,visible:e.centerDialogVisible,width:"50%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[s("span",[e._v("需要注意的是内容是默认不居中的")]),s("div",{staticStyle:{height:"600px"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("h1",[e._v("得分："+e._s(e.userTotalPoint))])])],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.userAnswerDetail}},[e._v("查看详情")]),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("确 定")])],1)])],1):e._e()},n=[],a=(s("d81d"),s("d3b7"),s("25f0"),s("4e82"),s("ac1f"),s("1276"),s("b775"));function r(e){return Object(a["a"])({url:"/exam/paper/paperQuestionList",method:"get",params:e})}function o(e){return Object(a["a"])({url:"/exam/userAnswer/addUserAnswer",method:"POST",data:e})}var l={name:"Examination",data:function(){return{answers:"",state:!1,currentIndex:0,selectRadio:[],selectsRadioList:[],paperData:{},checkQuestionList:[1],paperId:null,taskId:null,duration:null,startTime:null,endTime:null,centerDialogVisible:!1,userTotalPoint:null,userAnswerId:null}},created:function(){this.getRouterData()},methods:{userAnswerDetail:function(){this.$tab.openPage("答题详情","/exam/userPaper/"+this.userAnswerId)},countDown:function(){var e=this;setInterval((function(){var t=Date.parse(new Date);if(e.endTime>t){var s=e.getTimeNumber(e.endTime-t);e.duration=s.hour+":"+s.minutes+":"+s.seconds}}),1e3)},submit:function(){var e=this;o(this.submitDataInit()).then((function(t){e.userAnswerId=t.data,e.centerDialogVisible=!0}))},submitDataInit:function(){var e=this.paperData.questionList[this.currentIndex];"selects"==e.questionsType?e.selectsRadioList=this.selectsRadioList:"select"==e.questionsType?e.selectRadio=this.selectRadio:"answer"==e.questionsType&&(e.answers=this.answers);var t=this.paperData.questionList.map((function(e){if("select"==e.questionsType)null!=e.selectRadio?e.isCorrect=e.selectRadio===e.selectAnswer:e.isCorrect=!1;else if("selects"==e.questionsType)if(null!=e.selectsRadioList){var t=e.selectAnswer.split(",").sort().toString();e.isCorrect=e.selectsRadioList.sort().toString()===t}else e.isCorrect=!1;else"answer"==e.questionsType&&(null!=e.selectsRadioList?e.isCorrect=e.answer===e.answers:e.isCorrect=!1);return e})),s=t.map((function(e){return e.isCorrect?parseInt(e.score):0})).reduce((function(e,t){return e+t})),i={examinationPaperId:parseInt(this.paperId),startTime:this.startTime,endTime:new Date,totalPoints:s,taskId:parseInt(this.taskId),optionList:[]};return i.optionList=t.map((function(e){var t={examinationPaperQuestionsId:e.id,questionsType:e.questionsType,questionsAnswer:e.selectAnswer,isCorrect:e.isCorrect};return"select"==e.questionsType?t.userAnswer=e.selectRadio:"selects"==e.questionsType?t.userAnswer=null!=e.selectsRadioList?e.selectsRadioList.sort().toString():"":"answer"==e.questionsType&&(t.userAnswer=null!=e.answers?e.answers:"",t.questionsAnswer=e.answer),t})),this.userTotalPoint=i.totalPoints,i},subtract:function(){if(this.currentIndex>0){var e=this.paperData.questionList[this.currentIndex],t=this.paperData.questionList[this.currentIndex-1];"selects"==e.questionsType?e.selectsRadioList=this.selectsRadioList:"select"==e.questionsType?e.selectRadio=this.selectRadio:"answer"==e.questionsType&&(e.answers=this.answers),"selects"==t.questionsType?this.selectsRadioList=void 0==t.selectsRadioList?[]:t.selectsRadioList:"select"==t.questionsType?this.selectRadio=void 0==t.selectRadio?null:t.selectRadio:"answer"==e.questionsType&&(this.answers=void 0==t.answers?null:t.answers),this.currentIndex=this.currentIndex-1}},add:function(){if(this.currentIndex<this.paperData.questionList.length-1){var e=this.paperData.questionList[this.currentIndex],t=this.paperData.questionList[this.currentIndex+1];"selects"==e.questionsType?e.selectsRadioList=this.selectsRadioList:"select"==e.questionsType?e.selectRadio=this.selectRadio:"answer"==e.questionsType&&(e.answers=this.answers),"selects"==t.questionsType?this.selectsRadioList=void 0==t.selectsRadioList?[]:t.selectsRadioList:"select"==t.questionsType?this.selectRadio=void 0==t.selectRadio?null:t.selectRadio:"answer"==e.questionsType&&(this.answers=void 0==t.answers?null:t.answers),this.currentIndex=this.currentIndex+1}},checkoutChange:function(e){e.target.checked=!0},getRouterData:function(){var e=this;this.taskId=this.$route.params.taskId,this.paperId=this.$route.params.paperId,r({paperId:this.$route.params.paperId}).then((function(t){e.paperData=t.data,e.state=!0,e.startTime=new Date,e.startDate=Date.parse(new Date),e.endTime=e.startDate+60*t.data.duration*1e3,e.countDown()}))},getTimeNumber:function(e){var t=Math.floor(e/3600/1e3),s=Math.floor((e-3600*t)/60/1e3),i=Math.floor(e-1e3*(3600*t+60*s))/1e3;return{hour:t,minutes:s,seconds:i}}}},c=l,u=(s("4edc"),s("2877")),d=Object(u["a"])(c,i,n,!1,null,null,null);t["default"]=d.exports}}]);